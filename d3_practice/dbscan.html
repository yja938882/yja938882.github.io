<!DOCTYPE html>
<html>
	<head>
		<title>K-Means Clustering with d3</title>
		<style type="text/css">
			#board{
				width: 600px;
				height: 600px;
				float: left;
				border-width: 2px;
				border-style: solid;
			}
			#step{
				width: 80px;
				height: 40px;
				margin-left: 10px;

			}
		</style>
	</head>
	<body>
		<h1> <a href="https://yja938882.github.io" >yja938882.github.io</a> </h1>
		<h2> K-Means Clustering with d3.js </h2>	
		<div id="board">
			
		</div>
		<button id="step" onclick ="step()"> step </button>

	<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
	<script type="text/javascript" src="./d3js/d3.min.js"></script>
	<script type="text/javascript" src="./dbscan.js"></script>
	<script type="text/javascript" src="./random_data.js"></script>
	<script>
		var COLOR = [ 'gray' , 'maroon' , 'red' , 'purple' , 'fuchsia', 'green' , 'lime' , 'olive',
					'navy', 'blue', 'teal', 'orange', 'cyan' , 'darkslateblue' , 'indigo'];

		function getColor( c ){
			return COLOR[c];
		}

		var rd = generateRandomPoints( 10, 580, 10, 580, 2000 ,
			{ name : 'linear' , k : 5 ,err : 40, scope : 1 });
		var svg = d3.select('#board').append('svg')
				.attr('width','600').attr('height','600').append('g');

		var k = new DBSCAN( 15 , 5 , rd );
		
		function render( dots ){
			svg.selectAll('g').remove();
			var g = svg.append('g');
			g.selectAll('.dot')
			.data( dots )
			.enter().append('circle')
			.attr('class','dot')
			.attr('r',3)
			.attr('cx',function(d){ return d.x; })
			.attr('cy',function(d){ return d.y; })
			.attr('id',function(d){return d.cluster_id; })
			.style('fill',function(d){
				return getColor( d.cluster_id );
			});

		/*	g.selectAll('.dotc')
			.data( clusters )
			.enter().append('circle')
			.attr('class','dotc')
			.attr('r',10)
			.attr('cx',function(d){ return d.x; })
			.attr('cy',function(d){ return d.y; })
			.style('fill',function(d){
				return getColor( d.id );
			});*/
		}
		var s = 0;
		function step(){
			k.clustering(render);
			//if( s % 2 ==0)
			//	k.set_nearest_cluster( render );
			//else
			//	k.update_centroid(render);
			//k.step(s++ , render);
		}

		var g = svg.append('g');
			g.selectAll('.dot')
			.data( rd )
			.enter().append('circle')
			.attr('class','dot')
			.attr('r',3)
			.attr('cx',function(d){ return d.x; })
			.attr('cy',function(d){ return d.y; })
			.attr('id',function(d){ return d.cluster_id; })
			.style('fill',function(d){
				return 'black' ;
			});

	</script>
	</body>
	

</html>
